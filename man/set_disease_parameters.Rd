% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/set_disease_parameters.R
\name{set_disease_parameters}
\alias{set_disease_parameters}
\title{Sets disease selection parameters}
\usage{
set_disease_parameters(
  purpose = NULL,
  hensikt2select = NULL,
  hensikt2delete = NULL,
  utbrudd2select = NULL,
  metode2select = NULL,
  analytt2select = NULL,
  analytt2delete = NULL,
  art2select = NULL,
  include_missing_art = NULL,
  FUN = NULL,
  select_statement = NULL,
  selection_parameters = NULL,
  ...
)
}
\arguments{
\item{purpose}{[\code{character}]\cr
A short description of the purpose of the selection, see details. Defaults to NULL.}

\item{hensikt2select}{[\code{character}]\cr
Specific "hensiktkoder" for the "analytt" in question. If sub-codes should
    be included, end the code with \%. Defaults to \code{NULL}.}

\item{hensikt2delete}{[\code{character}]\cr
"hensiktkoder" for which saker should be excluded.
    If sub-codes should be included, end the code with \%. Defaults to \code{NULL}.}

\item{utbrudd2select}{[\code{character(1)}]\cr
"utbruddsID". Defaults to \code{NULL}.}

\item{metode2select}{[\code{character}]\cr
Specific "metodekoder" for the "analytt" in question. Defaults to \code{NULL}.}

\item{analytt2select}{[\code{character}]\cr
"analyttkoder" for the agent and/or disease. If sub-codes should be included,
    end the code with \%. Defaults to \code{NULL}.}

\item{analytt2delete}{[\code{character}]\cr
Specific "analyttkoder" that should be deleted, see details. If sub-codes should
    be included, end the code with \%. Defaults to \code{NULL}.}

\item{art2select}{[\code{character}]\cr
"artkoder". If sub-codes should be included, end the code with \%.  \code{NA} can be
    combined with another "artkode". Defaults to \code{NULL}.}

\item{include_missing_art}{[\code{character(1)}]\cr
Should missing art be included. Must be one of c("never", "always", "for_selected_hensikt").
    If \code{NULL}, it is set to "always" when \code{art2select} includes \code{NA}, else it is set to "never".
    Defaults to \code{NULL}.}

\item{FUN}{[\code{function}]\cr
Function to build the selection statement, see \code{\link{retrieve_PJSdata}}.
    Defaults to \code{NULL}.}

\item{select_statement}{[\code{character(1)}]\cr
A written select statement, see \code{\link{retrieve_PJSdata}}.
    Defaults to \code{NULL}.}

\item{selection_parameters}{[\code{character(1)}]\cr
Either the path and file name for an R script that can be sourced and that
    sets the selection parameters or a named list with the selection parameters
    (i.e. equal to the output of this function). Defaults to \code{NULL}.}

\item{\dots}{Other arguments to be passed to \code{set_disease_parameters}.}
}
\value{
A named list with selection parameters that can be used to generate
    SQL selection-statements and facilitate structuring output from PJS.
}
\description{
Sets the disease selection parameters and store them in a list
    object. The list follows a standardised named format and the elements can
    be used as input to
    \code{\link{build_query_hensikt}}, \code{\link{build_query_one_disease}}
    or \code{\link{build_query_outbreak}}.
}
\details{
Saker in PJS that concern one infection / disease can be characterised
    by the "analytt" (at "konklusjon" and/or "resultat" level), specific "hensikter",
    a relevant "utbrudds_ID" and/or specific "metoder." These can be used to select
    saker in PJS and/or to structure and simplify the output from PJS.

    The purpose is a short description of purpose of the selection described by the
    selection parameters for example "ok_svin_virus" that describes the selection
    parameters for the OK programme for virus in swine. The purpose is also used as
    part of the file name for selection_parameters, i.e. "purpose_selection_parameters"
    and in the annual tables for ok_programmer: Kontrolltabeller for yyyy.

    One or more specific "hensiktkoder" may be input to the selection statement.
    With specific "hensiktkode" is meant a "hensiktkode" that will imply that the sample
    will be examined for specific infectious agent(s) or disease. One or more
    specific "metodekoder" may be input to the selection statement. With specific
    "metodekode" is meant a "metodekode" that implies an examination that will give one
    of the input 2 as a result. If sub-codes of "analyttkode" or "hensiktkode"
    should be included, end the code with \%.

    The selection parameters can be input values for dedicated arguments. For input parameters
    \code{hensikt2select}, \code{hensikt2delete}, \code{utbrudd2select}, \code{metode2select},
    \code{analytt2select}, \code{analytt2delete}, \code{art2select}, \code{include_missing_art},
    \code{select_statement}, and \code{FUN},
    the input may be given in a source file. This may be handy if the
    selection will be performed many times. It also gives the possibility of
    using a for loop that selects PJS-data and performs similar analyses for one
    disease at a time.

    The selection parameter \code{analytt2delete} is intended for the situation where
    \code{analytt2select} includes analytter higher in the hierarchy and there are
    specific analytter lower in the hierarchy that should not be included. A typical
    example is the selection of all samples with the analytt Mycobacterium spp and
    below, but one is only interested in M. tuberculosis complex but not in M. avium.

    The possibility of input other arguments are kept to make it possible to use the
    deprecated arguments \code{missing_art} and \code{file}. If these are used, a
    warning is issued and the input is transferred to \code{include_missing_art} and
    \code{selection_parameters}, respectively.
}
\examples{
library(NVIpjsr)
# Generates selection_parameters-list with selection parameters for PD
selection_parameters <- set_disease_parameters(
  analytt2select = c("01220104\%", "1502010235"),
  hensikt2select = c("0100108018", "0100109003", "0100111003", "0800109"),
  metode2select = c("070070", "070231", "010057", "060265"),
  FUN = build_query_one_disease
  )

# Generates selection_parameters-list from a file
writeLines(
  c('hensikt2select <- c("0100108018", "0100109003", "0100111003", "0800109")',
    'utbrudd2select <- NULL',
    'metode2select <- c("070070", "070231", "010057", "060265")',
    'analytt2select <- c("01220104\%", "1502010235")'),
  con = file.path(tempdir(), "PD.R")
)
selection_parameters <- set_disease_parameters(
  selection_parameters = file.path(tempdir(), "PD.R")
  )

}
\author{
Petter Hopp Petter.Hopp@vetinst.no
}
